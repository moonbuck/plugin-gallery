{{ define "main" -}}

  {{- if not (.Scratch.Get "plugin-gallery.Parameters") -}}
    {{- partial "plugin-gallery/load-parameters.html" . -}}
  {{- end -}}
  
  {{- with .Scratch.Get "plugin-gallery.Parameters" -}}
  
    {{ if .Gallery.Header -}}
<h1 id="{{ .Style.HeaderID }}">{{ .Gallery.Header | chomp | markdownify }}</h1>
    {{- end }}
   
    {{ if .Gallery.Description -}}
<div id="{{ .Style.DescriptionID }}">{{ .Gallery.Description | chomp | markdownify }}</div>
    {{- end }}

    {{- $Parameters := dict 
      "gallery" .Gallery.Name
      "slide_data" .Assets.Slides
      "wrap" .Gallery.Wrap
      "photo_width" .Gallery.PhotoWidth
      "desc_position" .Gallery.DescPosition
      "effect" .Gallery.Effect
      "zoomable" .Gallery.Zoomable
      "draggable" .Gallery.Draggable
      "loop" .Gallery.Loop
      "autoplay" .Gallery.Autoplay
      "preload" .Gallery.Preload
      "width" .Gallery.Width
      "height" .Gallery.Height
      -}}
    
    {{- if templates.Exists (path.Join "partials" 
                                       .Config.GalleryPartial) -}}
      {{ partial .Config.GalleryPartial $Parameters }}
    {{- end -}}
    
  {{- end -}} {{/* with .Scratch.Get "plugin-gallery.Parameters" */}}

{{- end }} {{/* define "main" */}}