{{ define "main" }}
<section id="wrapper">

{{ $gallery_data := false }}
{{ with site.Data.plugin_gallery.gallery_data }}
{{ $gallery_data = . }}
{{ else }}
{{ with site.Params.gallery_data }}{{ $gallery_data = . }}{{ end }}
{{ end }}

{{ if (and $gallery_data (not ($gallery_data | reflect.IsMap))) }}
{{ with transform.Unmarshal $gallery_data }}
{{ $gallery_data = . }}
{{ end }}
{{ end }}

{{ if (and ($gallery_data | reflect.IsMap) (isset $gallery_data "slides")) }}


{{ with $gallery_data }}

{{ with .description }}
<div id="gallery-description">{{ . | markdownify }}</div>
{{ end }}

{{ $name := .name | default $.LinkTitle | anchorize }}

{{ partial "gallery.html" (dict "gallery" $name "photo_width" .photo_width "link_class" .link_class "img_class" .img_class "video_class" .video_class "link_style" .link_style "img_style" .img_style "video_style" .video_style "title_key" .title_key "desc_key" .desc_key "src_key" .src_key "width_key" .width_key "height_key" .height_key "thumb_src_key" .thumb_src_key "desc_position_key" .desc_position_key "slide_data" .slides) }}
  
{{ end }}
  
{{ end }}

</section>

{{ end }}